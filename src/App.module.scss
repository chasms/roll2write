/* Layout container */
.root {
  max-width: 1600px;
  margin: 0 auto;
  padding: 1rem 1rem 6rem;
}

.header {
  margin-bottom: 1.5rem;
  position: relative;
}

.flex-row {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

/* Fluid title sizing with graceful min/max */
.title {
  font-size: clamp(2rem, 5.5vw, 3.25rem);
  font-weight: 500;
  background: var(--r2w-header-gradient);
  background-clip: text;
  color: transparent;
}

.songs-panel {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 0.5rem;
  border: 1px solid var(--r2w-panel-border);
  background: var(--r2w-panel-bg);
  backdrop-filter: blur(18px);
  color: #ebe5d7;
  border-radius: 8px;
  min-width: 15rem;
  max-height: 20rem;
  overflow-y: auto;
  padding: 0.5rem;
  z-index: 10;
}

.song-button {
  text-align: left;
  width: 100%;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  margin-bottom: 0.25rem;
  cursor: pointer;
  font: inherit;
  border: none;
}

.song-button-selected {
  background: #16a34a;
  color: #fff;
}

.song-button-unselected {
  background: #e5e7eb;
  color: #000;
}

.selection-area {
  min-height: 10rem;
  border: 1px dashed var(--r2w-panel-border);
  border-radius: 8px;
  padding: 1rem;
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  align-items: flex-start;
  position: relative;
  background: var(--r2w-selection-bg);
}

/* Main content panel */
.main-section {
  position: relative;
  border-radius: 8px;
  padding: clamp(1rem, 2vw + 0.5rem, 2rem);
  margin-bottom: clamp(2rem, 4vh, 3rem);
  border: 1px solid var(--r2w-panel-border);
  background: var(--r2w-panel-bg);
  backdrop-filter: blur(14px);
}

/* Interaction row (selection + library) */
.interaction-row {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 2rem;
}

.left-col {
  flex: 1;
  min-width: 0;
}

.right-col {
  flex: 1;
}

.dice-library-grid {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fill, minmax(96px, 1fr));
  align-items: flex-start;
}

.fab {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  border-radius: 999px;
  padding: 1.1rem 1.35rem;
  font-size: clamp(1.4rem, 3vw, 1.75rem);
  cursor: pointer;
  z-index: 60;
  color: #fff;
  border: 1px solid var(--r2w-button-primary-border);
  background:
    radial-gradient(
      circle at 30% 30%,
      rgb(255 255 255 / 25%),
      rgb(255 255 255 / 0%) 60%
    ),
    linear-gradient(140deg, #5c3bff, #9c4bff 40%, #ff7ad6 72%, #ffe6a3);
  box-shadow:
    0 0 0 1px rgb(120 70 240 / 50%),
    0 4px 18px -4px rgb(40 0 80 / 90%),
    0 0 22px -2px rgb(140 70 255 / 65%),
    0 0 42px -2px rgb(255 110 210 / 40%);
  overflow: hidden;
  backdrop-filter: blur(6px);
}

.fab::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    rgb(255 255 255 / 35%),
    rgb(255 255 255 / 0%) 40%,
    rgb(255 255 255 / 35%)
  );
  mix-blend-mode: overlay;
  pointer-events: none;
}

.fab:hover {
  box-shadow:
    0 0 0 1px rgb(150 90 255 / 70%),
    0 6px 26px -4px rgb(60 0 120 / 90%),
    0 0 30px -2px rgb(170 80 255 / 85%),
    0 0 60px -2px rgb(255 140 230 / 55%);
  transform: translateY(-2px);
}

.fab:active {
  transform: translateY(0);
  box-shadow:
    0 0 0 1px rgb(120 70 240 / 60%),
    0 4px 20px -4px rgb(40 0 80 / 80%),
    0 0 26px -2px rgb(140 70 255 / 70%),
    0 0 46px -2px rgb(255 110 210 / 45%);
}

.github-button {
  position: absolute;
  top: 25px;
  right: 25px;
  height: 60px;
  width: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  backdrop-filter: invert(30%);
  cursor: pointer;
  transition:
    backdrop-filter 0.5s ease-in-out,
    height 0.5s ease-in-out,
    width 0.5s ease-in-out;

  &:hover {
    backdrop-filter: invert(80%);
    height: 80px;
    width: 80px;
  }
}

.github-image {
  height: 40px;
  width: 40px;
  margin: auto;
  opacity: 0.7;
}

/* --- Responsive Breakpoints --- */
@media (width <= 900px) {
  .flex-row {
    gap: 0.75rem;
  }

  .songs-panel {
    left: 0;
    right: 0;
    min-width: unset;
    width: 100%;
  }

  .selection-area {
    padding: 0.75rem;
    gap: 0.75rem;
  }
}

/* Stack dice library below selection at this breakpoint */
@media (width <= 1100px) {
  .interaction-row {
    flex-direction: column;
    gap: 2.5rem;
  }

  .dice-library-grid {
    grid-template-columns: repeat(auto-fill, minmax(88px, 1fr));
  }
}

@media (width <= 640px) {
  .root {
    padding: 0.75rem 0.75rem 5.5rem;
  }

  .header {
    margin-bottom: 1rem;
  }

  .songs-panel {
    position: static;
    margin-top: 0.5rem;
    max-height: 12rem;
  }

  .main-section {
    padding: 1rem;
  }

  .fab {
    bottom: 1rem;
    right: 1rem;
    padding: 0.85rem 1rem;
    font-size: 1.35rem;
  }

  .selection-area {
    min-height: 8rem;
  }

  .dice-library-grid {
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 0.75rem;
  }
}

@media (width >= 1800px) {
  .root {
    max-width: 1900px;
  }

  .title {
    font-size: clamp(3rem, 3vw, 4rem);
  }
}

/* Fae button skin (previous utility class) */
.r2w-fae-btn {
  position: relative;
  background: var(--r2w-btn-bg, #5b32c9);
  color: var(--r2w-btn-text, #fff) !important;
  border: 1px solid var(--r2w-btn-outline, rgb(255 255 255 / 28%));
  box-shadow:
    0 0 0 1px rgb(0 0 0 / 35%),
    0 2px 6px -1px rgb(0 0 0 / 60%),
    0 0 0 1px inset rgb(255 255 255 / 8%);
  text-shadow: 0 1px 2px rgb(0 0 0 / 55%);
  letter-spacing: 0.5px;
  overflow: hidden;
  transition:
    background 140ms ease,
    box-shadow 220ms ease,
    transform 140ms ease;
}

.r2w-fae-btn::before,
.r2w-fae-btn::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.r2w-fae-btn::before {
  background: linear-gradient(
    130deg,
    rgb(255 255 255 / 18%),
    transparent 40%,
    rgb(255 255 255 / 12%) 60%,
    transparent 85%
  );
  mix-blend-mode: overlay;
  opacity: 0.6;
  transition: opacity 0.25s;
}

.r2w-fae-btn::after {
  background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='40' viewBox='0 0 120 40'><text x='4' y='18' font-size='14' fill='%23d6b657' font-family='Uncial Antiqua'>ᚠᛞᚨᚱᚲ</text><text x='60' y='34' font-size='14' fill='%23c184ff' font-family='Uncial Antiqua'>ᛒᚱᛟᚨᛁᚾ</text></svg>");
  background-size: 140% 140%;
  background-repeat: no-repeat;
  mix-blend-mode: soft-light;
  opacity: 0.25;
  filter: blur(0.4px);
  transition: opacity 0.3s;
}

.r2w-fae-btn:hover {
  background: var(--r2w-btn-bg-hover, #6f3fff);
}

.r2w-fae-btn:hover::before {
  opacity: 0.9;
}

.r2w-fae-btn:active {
  background: var(--r2w-btn-bg-active, #4a27a9);
  transform: translateY(1px) scale(0.985);
}

.r2w-fae-btn:focus-visible {
  outline: 2px solid var(--r2w-btn-text, #fff);
  outline-offset: 2px;
}

.r2w-fae-btn:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

/* THEME PALETTES */

/* Classic theme overrides */
.r2w-classic {
  font-family:
    "Cormorant SC", "Cinzel Decorative", "Uncial Antiqua", MedievalSharp,
    Georgia, serif;

  --r2w-accent: #d6b657;
  --r2w-accent-glow: rgb(214 182 87 / 55%);
  --r2w-accent-gradient: linear-gradient(
    135deg,
    #583c9e 0%,
    #d6b657 28%,
    #f2c979 55%,
    #ffdfb0 82%,
    #b487ff 100%
  );
  --r2w-header-gradient: linear-gradient(
    95deg,
    #ffdfb0 0%,
    #d6b657 40%,
    #b487ff 100%
  );
  --r2w-panel-bg: rgb(46 35 18 / 35%);
  --r2w-panel-border: rgb(255 222 179 / 25%);
  --r2w-button-primary-bg: linear-gradient(
    130deg,
    #b487ff 0%,
    #d6b657 55%,
    #ffdfb0 100%
  );
  --r2w-button-primary-border: rgb(255 222 179 / 50%);
  --r2w-selection-bg: rgb(55 38 20 / 35%);
  --r2w-btn-bg: #5d3c12;
  --r2w-btn-bg-hover: #7a5018;
  --r2w-btn-bg-active: #4a2c0d;
  --r2w-btn-text: #ffefcc;
  --r2w-btn-outline: rgb(255 239 204 / 40%);
}

.r2w-classic h1,
.r2w-classic h2,
.r2w-classic h3,
.r2w-classic h4 {
  font-family:
    "Uncial Antiqua", "Cinzel Decorative", "Cormorant SC", MedievalSharp,
    Georgia, serif;
}

/* Alt theme explicitly reasserts default variables to support toggling */
.r2w-alt {
  font-family: MedievalSharp, "Almendra Display", Georgia, serif;

  --r2w-accent: #7b5df9;
  --r2w-accent-glow: rgb(123 93 249 / 55%);
  --r2w-accent-gradient: linear-gradient(
    140deg,
    #7b5df9 0%,
    #c184ff 45%,
    #8bd6ff 90%
  );
  --r2w-header-gradient: linear-gradient(
    90deg,
    #7b5df9 0%,
    #c184ff 50%,
    #8bd6ff 100%
  );
  --r2w-panel-bg: rgb(255 255 255 / 5%);
  --r2w-panel-border: rgb(255 255 255 / 15%);
  --r2w-button-primary-bg: var(--r2w-accent-gradient);
  --r2w-button-primary-border: rgb(255 255 255 / 30%);
  --r2w-selection-bg: rgb(0 0 0 / 15%);
  --r2w-btn-bg: #5b32c9;
  --r2w-btn-bg-hover: #7242f0;
  --r2w-btn-bg-active: #462497;
  --r2w-btn-text: #fff;
  --r2w-btn-outline: rgb(255 255 255 / 25%);
}

.r2w-alt h1,
.r2w-alt h2,
.r2w-alt h3,
.r2w-alt h4 {
  font-family: "Almendra Display", MedievalSharp, Georgia, serif;
}
