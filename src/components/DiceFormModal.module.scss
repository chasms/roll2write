.overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
  padding: 1.5rem;
  backdrop-filter: blur(14px);
  background: radial-gradient(
    circle at 20% 30%,
    rgb(123 93 249 / 25%),
    transparent 70%
  );
}

.form {
  position: relative;
  border-radius: 12px;
  max-width: 1000px;
  width: 100%;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: rgb(255 255 255 / 6%);
  color: #ebe5d7;
  border: 1px solid rgb(255 255 255 / 20%);
  box-shadow:
    0 0 0 1px rgb(0 0 0 / 40%),
    0 0 28px -6px rgb(123 93 249 / 70%);
  backdrop-filter: blur(22px);

  --footer-height: 56px;

  animation: modal-enter 0.45s cubic-bezier(0.4, 0.4, 0, 1);
}

.header {
  flex-shrink: 0;
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 1rem;
  position: relative;
  backdrop-filter: blur(28px) saturate(140%);
  box-shadow:
    0 2px 6px -2px rgb(0 0 0 / 55%),
    0 0 0 1px rgb(255 255 255 / 6%);
  padding: 0.5rem 1rem;
  background: rgb(18 15 25 / 80%);
}

.tabs {
  display: flex;
  gap: 0.5rem;
}

.tab {
  position: relative;
  cursor: pointer;
  font: inherit;
  font-size: 0.8rem;
  padding: 0.35rem 0.75rem;
  border-radius: 4px;
  border: 1px solid rgb(255 255 255 / 20%);
  background: rgb(255 255 255 / 8%);
  color: #ebe5d7;
}

.tab-active {
  border-color: rgb(255 255 255 / 35%);
  background: rgb(255 255 255 / 18%);
  box-shadow:
    0 0 0 1px rgb(0 0 0 / 45%),
    0 0 0 1px inset rgb(255 255 255 / 25%),
    0 6px 18px -6px rgb(123 93 249 / 80%);
}

.content {
  flex: 1;
  overflow-y: auto;
  padding: clamp(1rem, 2vw + 0.25rem, 2rem);
}

.fieldset {
  border: 1px solid rgb(255 255 255 / 25%);
  background: rgb(255 255 255 / 5%);
  padding: 0.75rem;
  border-radius: 4px;
  margin-bottom: 1.5rem;
}

.legend {
  padding: 0 0.25rem;
  font-size: 0.7rem;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.preset-button {
  padding: 0.5rem 0.75rem;
  font-size: 0.75rem;
  border-radius: 4px;
  border: 1px solid rgb(255 255 255 / 25%);
  cursor: pointer;
  background: rgb(255 255 255 / 15%);
  color: #ebe5d7;
}

.preset-button-active {
  background: #4a2ed6;
  color: #fff;
  border-color: rgb(255 255 255 / 40%);
  box-shadow:
    0 0 0 1px rgb(0 0 0 / 40%),
    0 0 14px -2px rgb(123 93 249 / 60%),
    inset 0 0 0 1px rgb(255 255 255 / 25%);
}

.option-list {
  max-height: 16rem;
  overflow-y: auto;
  padding: 0.5rem;
  border: 1px solid rgb(255 255 255 / 25%);
  background: rgb(255 255 255 / 5%);
  margin-bottom: 1rem;
}

.option-row {
  display: flex;
  align-items: center;
  margin-bottom: 0.5rem;
}

.option-index {
  width: 2.5rem;
}

.input-text {
  flex: 1;
  border: 1px solid rgb(255 255 255 / 25%);
  background: rgb(0 0 0 / 25%);
  color: #ebe5d7;
  padding: 0.25rem 0.5rem;
}

.label-block {
  display: block;
  margin-bottom: 1rem;
}

.label-title {
  display: block;
  margin-bottom: 0.25rem;
  font-size: 0.8rem;
}

.name-input {
  width: 100%;
  border: 1px solid rgb(255 255 255 / 30%);
  background: rgb(0 0 0 / 25%);
  color: #ebe5d7;
  padding: 0.5rem 0.75rem;
}

.sides-legend,
.legend {
  padding: 0 0.25rem;
  font-size: 0.65rem;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.preset-wrap {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.actions-row {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.small-note {
  font-size: 0.65rem;
  color: #9ca3af;
}

.small-note-error {
  font-size: 0.65rem;
  color: #fca5a5;
}

.small-note-success {
  font-size: 0.65rem;
  color: #86efac;
}

.toast-layer {
  position: absolute;
  left: 0;
  right: 0;
  bottom: calc(var(--footer-height) + 8px);
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 0 1rem;
  pointer-events: none;
}

.toast {
  backdrop-filter: blur(14px);
  border: 1px solid rgb(255 255 255 / 25%);
  border-radius: 8px;
  padding: 0.75rem 1rem;
  font-size: 0.8rem;
  box-shadow:
    0 4px 18px -6px rgb(0 0 0 / 60%),
    0 0 0 1px rgb(0 0 0 / 40%);
  position: relative;
  overflow: hidden;
  pointer-events: auto;
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  background: rgb(255 255 255 / 14%);
  color: #ffe5e5;
}

.toast-dismiss {
  position: relative;
  cursor: pointer;
  font-size: 0.65rem;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  border: 1px solid rgb(255 255 255 / 25%);
  background: rgb(0 0 0 / 35%);
  color: #fff;
}

.footer {
  flex-shrink: 0;
  display: flex;
  gap: 1rem;
  align-items: center;
  justify-content: flex-start;
  backdrop-filter: blur(28px) saturate(140%);
  box-shadow:
    0 -2px 6px -2px rgb(0 0 0 / 55%),
    0 0 0 1px rgb(255 255 255 / 6%);
  padding: 0.5rem 1rem;
  background: rgb(18 15 25 / 80%);
}

.save-button {
  padding: 0.5rem 1.25rem;
  border-radius: 4px;
  font-weight: 500;
  background: linear-gradient(90deg, #7b5df9, #c184ff, #8bd6ff);
  color: #120f19;
  border: 1px solid rgb(255 255 255 / 25%);
  box-shadow:
    0 0 0 1px rgb(0 0 0 / 50%),
    0 4px 14px -4px rgb(123 93 249 / 70%);
  cursor: pointer;
}

.cancel-button {
  padding: 0.5rem 1.25rem;
  border-radius: 4px;
  background: rgb(255 255 255 / 15%);
  color: #ebe5d7;
  border: 1px solid rgb(255 255 255 / 25%);
  cursor: pointer;
}

.divider-section {
  margin-bottom: 1.5rem;
}

.grid-controls {
  display: grid;
  gap: 0.5rem;
}

.range-label {
  display: flex;
  flex-direction: column;
  font-size: 0.65rem;
}

.radio-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.radio-item {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

/* Motion preference: reduce or remove entrance animation */
@media (prefers-reduced-motion: reduce) {
  .form {
    animation: none;
  }
}

@keyframes modal-enter {
  0% {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
  }

  70% {
    opacity: 1;
  }

  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Responsive tweaks */
@media (width <= 860px) {
  .header {
    flex-wrap: wrap;
    padding: 0.5rem 0.75rem;
  }

  .tabs {
    flex-wrap: wrap;
  }

  .content {
    padding: 1.25rem 1rem;
  }

  .option-row {
    flex-wrap: wrap;
  }

  .option-index {
    width: 2rem;
  }
}

@media (width <= 640px) {
  .overlay {
    padding: 0.75rem;
  }

  .form {
    border-radius: 10px;
    max-height: 92vh;
  }

  .header {
    gap: 0.5rem;
  }

  .tabs {
    gap: 0.4rem;
  }

  .tab {
    font-size: 0.7rem;
    padding: 0.3rem 0.55rem;
  }

  .content {
    padding: 1rem 0.75rem 1.25rem;
  }

  .fieldset {
    padding: 0.6rem;
    margin-bottom: 1rem;
  }

  .option-list {
    max-height: 12rem;
  }

  .actions-row {
    gap: 0.75rem;
  }

  .save-button,
  .cancel-button {
    padding: 0.45rem 0.9rem;
    font-size: 0.8rem;
  }

  .footer {
    padding: 0.45rem 0.75rem;
    gap: 0.75rem;
  }
}

@media (width <= 400px) {
  .tab {
    font-size: 0.62rem;
    padding: 0.25rem 0.45rem;
  }

  .save-button,
  .cancel-button {
    font-size: 0.72rem;
  }

  .preset-button {
    font-size: 0.65rem;
    padding: 0.4rem 0.55rem;
  }

  .content {
    padding: 0.85rem 0.6rem 1rem;
  }
}
